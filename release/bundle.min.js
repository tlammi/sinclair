"use strict";function createElement(e,t){var n=parse(e),i=n.tag,r=n.id,o=n.className,l=t?document.createElementNS(t,i):document.createElement(i);return r&&(l.id=r),o&&(t?l.setAttribute("class",o):l.className=o),l}function parse(e){for(var t=e.split(/([.#])/),n="",i="",r=1;r<t.length;r+=2)switch(t[r]){case".":n+=" "+t[r+1];break;case"#":i=t[r+1]}return{className:n.trim(),tag:t[0]||"div",id:i}}function unmount(e,t){var n=getEl(e),i=getEl(t);return t===i&&i.__redom_view&&(t=i.__redom_view),i.parentNode&&(doUnmount(t,i,n),n.removeChild(i)),t}function doUnmount(e,t,n){var i=t.__redom_lifecycle;if(hooksAreEmpty(i))t.__redom_lifecycle={};else{var r=n;for(t.__redom_mounted&&trigger(t,"onunmount");r;){var o=r.__redom_lifecycle||{};for(var l in i)o[l]&&(o[l]-=i[l]);hooksAreEmpty(o)&&(r.__redom_lifecycle=null),r=r.parentNode}}}function hooksAreEmpty(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0}var hookNames=["onmount","onremount","onunmount"],shadowRootAvailable="undefined"!=typeof window&&"ShadowRoot"in window;function mount(e,t,n,i){var r=getEl(e),o=getEl(t);t===o&&o.__redom_view&&(t=o.__redom_view),t!==o&&(o.__redom_view=t);var l=o.__redom_mounted,s=o.parentNode;if(l&&s!==r&&doUnmount(t,o,s),null!=n)if(i){var a=getEl(n);a.__redom_mounted&&trigger(a,"onunmount"),r.replaceChild(o,a)}else r.insertBefore(o,getEl(n));else r.appendChild(o);return doMount(t,o,r,s),t}function trigger(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var i=e.__redom_view,r=0;for(var o in i&&i[t]&&i[t](),n)o&&r++;if(r)for(var l=e.firstChild;l;){var s=l.nextSibling;trigger(l,t),l=s}}}function doMount(e,t,n,i){for(var r=t.__redom_lifecycle||(t.__redom_lifecycle={}),o=n===i,l=!1,s=0,a=hookNames;s<a.length;s+=1){var u=a[s];o||e!==t&&u in e&&(r[u]=(r[u]||0)+1),r[u]&&(l=!0)}if(l){var c=n,f=!1;for((o||c&&c.__redom_mounted)&&(trigger(t,o?"onremount":"onmount"),f=!0);c;){var d=c.parentNode,_=c.__redom_lifecycle||(c.__redom_lifecycle={});for(var h in r)_[h]=(_[h]||0)+r[h];if(f)break;(c.nodeType===Node.DOCUMENT_NODE||shadowRootAvailable&&c instanceof ShadowRoot||d&&d.__redom_mounted)&&(trigger(c,o?"onremount":"onmount"),f=!0),c=d}}else t.__redom_lifecycle={}}function setStyle(e,t,n){var i=getEl(e);if("object"==typeof t)for(var r in t)setStyleValue(i,r,t[r]);else setStyleValue(i,t,n)}function setStyleValue(e,t,n){e.style[t]=null==n?"":n}var xlinkns="http://www.w3.org/1999/xlink";function setAttr(e,t,n){setAttrInternal(e,t,n)}function setAttrInternal(e,t,n,i){var r=getEl(e);if("object"==typeof t)for(var o in t)setAttrInternal(r,o,t[o],i);else{var l=r instanceof SVGElement,s="function"==typeof n;if("style"===t&&"object"==typeof n)setStyle(r,n);else if(l&&s)r[t]=n;else if("dataset"===t)setData(r,n);else if(l||!(t in r)&&!s||"list"===t){if(l&&"xlink"===t)return void setXlink(r,n);i&&"class"===t&&(n=r.className+" "+n),null==n?r.removeAttribute(t):r.setAttribute(t,n)}else r[t]=n}}function setXlink(e,t,n){if("object"==typeof t)for(var i in t)setXlink(e,i,t[i]);else null!=n?e.setAttributeNS(xlinkns,t,n):e.removeAttributeNS(xlinkns,t,n)}function setData(e,t,n){if("object"==typeof t)for(var i in t)setData(e,i,t[i]);else null!=n?e.dataset[t]=n:delete e.dataset[t]}function text(e){return document.createTextNode(null!=e?e:"")}function parseArgumentsInternal(e,t,n){for(var i=0,r=t;i<r.length;i+=1){var o=r[i];if(0===o||o){var l=typeof o;"function"===l?o(e):"string"===l||"number"===l?e.appendChild(text(o)):isNode(getEl(o))?mount(e,o):o.length?parseArgumentsInternal(e,o,n):"object"===l&&setAttrInternal(e,o,null,n)}}}function ensureEl(e){return"string"==typeof e?html(e):getEl(e)}function getEl(e){return e.nodeType&&e||!e.el&&e||getEl(e.el)}function isNode(e){return e&&e.nodeType}function html(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var r=typeof e;if("string"===r)t=createElement(e);else{if("function"!==r)throw new Error("At least one argument required");var o=e;t=new(Function.prototype.bind.apply(o,[null].concat(n)))}return parseArgumentsInternal(getEl(t),n,!0),t}var el=html,h=html;function setChildren(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var i=traverse(e,t,getEl(e).firstChild);i;){var r=i.nextSibling;unmount(e,i),i=r}}function traverse(e,t,n){for(var i=n,r=Array(t.length),o=0;o<t.length;o++)r[o]=t[o]&&getEl(t[o]);for(var l=0;l<t.length;l++){var s=t[l];if(s){var a=r[l];if(a!==i)if(isNode(a)){var u=i&&i.nextSibling,c=null!=s.__redom_index&&u===r[l+1];mount(e,s,i,c),c&&(i=u)}else null!=s.length&&(i=traverse(e,s,i));else i=i.nextSibling}}return i}function listPool(e,t,n){return new ListPool(e,t,n)}html.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return html.bind.apply(html,[this].concat(e))};var ListPool=function(e,t,n){this.View=e,this.initData=n,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=t&&(this.key="function"==typeof t?t:propKey(t))};function propKey(e){return function(t){return t[e]}}function list(e,t,n,i){return new List(e,t,n,i)}ListPool.prototype.update=function(e,t){for(var n=this,i=n.View,r=n.key,o=n.initData,l=null!=r,s=this.lookup,a={},u=Array(e.length),c=this.views,f=0;f<e.length;f++){var d=e[f],_=void 0;if(l){var h=r(d);_=s[h]||new i(o,d,f,e),a[h]=_,_.__redom_id=h}else _=c[f]||new i(o,d,f,e);_.update&&_.update(d,f,e,t),getEl(_.el).__redom_view=_,u[f]=_}this.oldViews=c,this.views=u,this.oldLookup=s,this.lookup=a};var List=function(e,t,n,i){this.View=t,this.initData=i,this.views=[],this.pool=new ListPool(t,n,i),this.el=ensureEl(e),this.keySet=null!=n};function place(e,t){return new Place(e,t)}List.prototype.update=function(e,t){void 0===e&&(e=[]);var n=this.keySet,i=this.views;this.pool.update(e,t);var r=this.pool,o=r.views,l=r.lookup;if(n)for(var s=0;s<i.length;s++){var a=i[s];null==l[a.__redom_id]&&(a.__redom_index=null,unmount(this,a))}for(var u=0;u<o.length;u++){o[u].__redom_index=u}setChildren(this,o),n&&(this.lookup=l),this.views=o},List.extend=function(e,t,n,i){return List.bind(List,e,t,n,i)},list.extend=List.extend;var Place=function(e,t){this.el=text(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:e.el instanceof Node?(this._el=e,this.view=e):this._View=e,this._initData=t};function router(e,t,n){return new Router(e,t,n)}Place.prototype.update=function(e,t){var n=this._placeholder,i=this.el.parentNode;if(e){if(!this.visible)if(this._el)mount(i,this._el,n),unmount(i,n),this.el=getEl(this._el),this.visible=e;else{var r=new(0,this._View)(this._initData);this.el=getEl(r),this.view=r,mount(i,r,n),unmount(i,n)}this.view&&this.view.update&&this.view.update(t)}else if(this.visible){if(this._el)return mount(i,n,this._el),unmount(i,this._el),this.el=n,void(this.visible=e);mount(i,n,this.view),unmount(i,this.view),this.el=n,this.view=null}this.visible=e};var Router=function(e,t,n){this.el=ensureEl(e),this.Views=t,this.initData=n};Router.prototype.update=function(e,t){if(e!==this.route){var n=this.Views[e];this.route=e,n&&(n instanceof Node||n.el instanceof Node)?this.view=n:this.view=n&&new n(this.initData,t),setChildren(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var ns="http://www.w3.org/2000/svg";function svg(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var r=typeof e;if("string"===r)t=createElement(e,ns);else{if("function"!==r)throw new Error("At least one argument required");var o=e;t=new(Function.prototype.bind.apply(o,[null].concat(n)))}return parseArgumentsInternal(getEl(t),n,!0),t}var s=svg;svg.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return svg.bind.apply(svg,[this].concat(e))},svg.ns=ns;var sinclair,app,redom_es=Object.freeze({__proto__:null,List:List,ListPool:ListPool,Place:Place,Router:Router,el:el,h:h,html:html,list:list,listPool:listPool,mount:mount,place:place,router:router,s:s,setAttr:setAttr,setChildren:setChildren,setData:setData,setStyle:setStyle,setXlink:setXlink,svg:svg,text:text,unmount:unmount});function row(){for(var e=[],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.push(redom_es.el("td",t))})),redom_es.el.apply(void 0,["tr"].concat(e))}function table(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=redom_es.el.apply(void 0,["tbody"].concat(t));return redom_es.el("table",i)}function radio(e,t){var n=e+"-"+t;return[redom_es.el("input",{name:e,id:n,type:"radio",value:t}),redom_es.el("label",t,{for:n})]}function radio_group(e,t){var n=[],i=0;for(var r=arguments.length,o=new Array(r>2?r-2:0),l=2;l<r;l++)o[l-2]=arguments[l];return o.forEach((function(r){var o,l=radio(e,r),s=l[0],a=l[1];s.addEventListener("click",(o=i,function(){t(o)})),n.push(s,a,redom_es.el("br")),++i})),n[0].checked=!0,n}function button(e,t){void 0===t&&(t=null);var n=redom_es.el("button",e);return t&&n.addEventListener("click",t),n}function input(e,t){return void 0===t&&(t=null),redom_es.el("input",{type:"text",value:e,readonly:t})}function populate_calculator(e,t,n){var i=document.getElementById(e);if(i){var r=new app.Args,o=row("Laskentakaava:",radio_group(e+"-formula",(function(e){switch(e){case 0:r.sex=sinclair.Sex.Male,r.sex_projected=sinclair.Sex.Male;break;case 1:r.sex=sinclair.Sex.Female,r.sex_projected=sinclair.Sex.Female;break;case 2:r.sex=sinclair.Sex.Female,r.sex_projected=sinclair.Sex.Male;break;default:console.warn("Unknown setting in formula radio: "+e)}console.log("radio: "+e)}),"mies","nainen","nainen → mies *")),l=n(r,t),s=l[0],a=l[1],u=l[2],c=row(button("Laske",(function(){t(r)}))),f=input("",!0);r.coeff=f;var d=table(o,s,a,c,row("Sinclair-kerroin:",f),u);redom_es.mount(i,d)}else console.log('Could not find element with id "'+e+'"')}function populate_info(e){var t=document.getElementById(e);if(t){var n=redom_es.el("p","* Muunnos naisten pisteistä miesten pisteiksi");redom_es.mount(t,n)}else console.log('Could not find element with id "'+e+'"')}function handle_keypress(e,t){return function(n){"Enter"===n.key&&t(e)}}function score_populator(e,t){var n=input(""),i=input(""),r=input("",!0);return n.addEventListener("keypress",handle_keypress(e,t)),i.addEventListener("keypress",handle_keypress(e,t)),e.lifted_weight=n,e.body_weight=i,e.score=r,[row("Tulos:",n),row("Paino:",i),row("Pisteet:",r)]}function populate_lw(e,t){var n=input(""),i=input(""),r=input("",!0);return n.addEventListener("keypress",handle_keypress(e,t)),i.addEventListener("keypress",handle_keypress(e,t)),e.score=n,e.body_weight=i,e.lifted_weight=r,[row("Pisteet:",n),row("Paino:",i),row("Tulos:",r)]}function populate_bw(e,t){var n=input(""),i=input(""),r=input("",!0);return n.addEventListener("keypress",handle_keypress(e,t)),i.addEventListener("keypress",handle_keypress(e,t)),e.score=n,e.lifted_weight=i,e.body_weight=r,[row("Pisteet:",n),row("Tulos",i),row("Paino:",r)]}!function(e){var t,n=Math.min,i=Math.max,r=Math.log10,o=Math.pow,l=Math.sqrt,s=1.354,a=[1,1.016,1.031,1.046,1.059,1.072,1.083,1.096,1.109,1.122,1.135,1.149,1.162,1.176,1.189,1.203,1.218,1.233,1.248,1.263,1.279,1.297,1.316,1.338,1.361,1.385,1.411,1.437,1.462,1.488,1.514,1.541,1.568,1.598,1.629,1.663,1.699,1.738,1.779,1.823,1.867,1.91,1.953,2.004,2.06,2.117,2.181,2.255,2.336,2.419,2.504,2.597,2.702,2.831,2.981,3.153,3.352,3.58,3.843,4.145,4.493];function u(e,t,n,i,l){if(l<t){var s=e*o(r(l/t),2);return n*i*o(10,s)}return n*i}function c(e,t,n){return u(e,t,1,1,n)}function f(e,t,n,i,s,a){if(a<=n*i*s)return t;var u=-l(r(a/(n*i*s))/e);return t*o(10,u)}!function(e){e[e.Male=0]="Male",e[e.Female=1]="Female"}(t=e.Sex||(e.Sex={})),e.coeff_a=function(e){switch(e){case t.Male:return.75194503;case t.Female:return.783497476}},e.coeff_b=function(e){switch(e){case t.Male:return 175.508;case t.Female:return 153.655}},e.coeff_sex=function(e,n){return e===n?1:e===t.Male?1/s:s},e.coeff_age=function(e){var t=i(0,n(e-30,a.length-1));return a[t]},e.coeff_extended=u,e.coeff=c,e.score_extended=function(e,t,n,i,r,o){return u(e,t,n,i,r)*o},e.score=function(e,t,n,i){return c(e,t,n)*i},e.weight_extended=function(e,t,n,i,r,o){return o/u(e,t,n,i,r)},e.weight=function(e,t,n,i){return i/c(e,t,n)},e.body_weight_extended=f,e.body_weight=function(e,t,n,i){return f(e,t,1,1,n,i)}}(sinclair||(sinclair={})),function(e){var t;function n(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0,o=n;r<o.length;r++){var l=o[r];if(l===t.Comma)return!0;if(l===t.Dot)return!1}return!1}!function(e){e[e.None=0]="None",e[e.Comma=1]="Comma",e[e.Dot=2]="Dot"}(t||(t={}));var i=3,r=function(){this.value=""};e.Null=r;e.Args=function(){this.lifted_weight=new r,this.body_weight=new r,this.coeff=new r,this.score=new r,this.sex=sinclair.Sex.Male,this.sex_projected=sinclair.Sex.Male,this.age=0};var o=function(){this.a=0,this.b=0,this.coeff_sex=0,this.coeff_age=0};function l(e){var t=new o;return t.a=sinclair.coeff_a(e.sex),t.b=sinclair.coeff_b(e.sex),t.coeff_sex=sinclair.coeff_sex(e.sex,e.sex_projected),t.coeff_age=sinclair.coeff_age(e.age),t}function s(e){var n=-1!==e.value.indexOf(","),i=-1!==e.value.indexOf("."),r=e.value.replace(",","."),o=t.None;return n?o=t.Comma:i&&(o=t.Dot),[Number(r),o]}function a(e,t){var n=e.toFixed(i);return t?n.replace(".",","):n}e.extended_sinclair_score=function(e){var t=s(e.lifted_weight),i=t[0],r=t[1],o=s(e.body_weight),u=o[0],c=n(r,o[1]),f=l(e),d=sinclair.score_extended(f.a,f.b,f.coeff_sex,f.coeff_age,u,i),_=sinclair.coeff_extended(f.a,f.b,f.coeff_sex,f.coeff_age,u);e.coeff.value=a(_,c),e.score.value=a(d,c)},e.extended_sinclair_lifted_weight=function(e){var t=s(e.score),i=t[0],r=t[1],o=s(e.body_weight),u=o[0],c=n(r,o[1]),f=l(e),d=sinclair.weight_extended(f.a,f.b,f.coeff_sex,f.coeff_age,u,i),_=sinclair.coeff_extended(f.a,f.b,f.coeff_sex,f.coeff_age,u);e.coeff.value=a(_,c),e.lifted_weight.value=a(d,c)},e.extended_sinclair_body_weight=function(e){var t=s(e.lifted_weight),i=t[0],r=t[1],o=s(e.score),u=o[0],c=n(r,o[1]),f=l(e),d=sinclair.body_weight_extended(f.a,f.b,f.coeff_sex,f.coeff_age,i,u),_=sinclair.coeff_extended(f.a,f.b,f.coeff_sex,f.coeff_age,d);e.coeff.value=a(_,c),e.body_weight.value=a(d,c)}}(app||(app={})),populate_calculator("sinclair_score",app.extended_sinclair_score,score_populator),populate_calculator("sinclair_weight",app.extended_sinclair_lifted_weight,populate_lw),populate_calculator("sinclair_bw",app.extended_sinclair_body_weight,populate_bw),populate_info("sinclair_info");
